name: snapcraft

on: push

jobs:
  build-stable:
    if: github.ref == 'refs/heads/master'
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - uses: snapcore/action-build@v1
      id: outputs
    - uses: snapcore/action-publish@v1
      env:
        SNAPCRAFT_STORE_CREDENTIALS: ${{ secrets.SNAP_LOGIN }}
      with:
        snap: ${{ steps.build-stable.outputs.snap }}
        release: candidate
  build-beta:
    if: github.ref == 'refs/heads/beta'
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - uses: snapcore/action-build@v1
      id: outputs
    - uses: snapcore/action-publish@v1
      env:
        SNAPCRAFT_STORE_CREDENTIALS: ${{ secrets.SNAP_LOGIN }}
      with:
        snap: ${{ steps.build-beta.outputs.snap }}
        release: beta